<div>
  @if(loadingAuthors) {
  <p>Loading!</p>
  } @else {
  <form
    class="flex mb-10"
    [formGroup]="searchAuthorForm"
    (ngSubmit)="onSearch()"
  >
    <div>
      <app-input
        [type]="'text'"
        [label]="'Author'"
        [placeholder]="'Author name'"
        formControlName="authorName"
        [isError]="
          searchAuthorForm.controls.authorName.invalid &&
          searchAuthorForm.controls.authorName.touched
        "
      ></app-input>
      @if (searchAuthorForm.controls.authorName.invalid &&
      searchAuthorForm.controls.authorName.touched ) {
      <div
        class="validate-error mt-2"
        *ngIf="searchAuthorForm.controls.authorName.errors?.['required']"
      >
        Search name is required
      </div>
      }
    </div>
    <app-button
      [button-styles]="'margin: 10px 0 0 40px'"
      [text]="'Search'"
      [disabled]="searchAuthorForm.invalid || searchAuthorForm.untouched"
    />
  </form>

  <div *ngIf="authorsList.length; else noAuthors">
    <p>Found results: {{ numFound }}</p>
    <div class="author__list">
      @for (author of authorsList; track author.key) {
      <a
        class="author__list-link bg-zinc-300 font-semibold"
        [routerLink]="['/authorlist', author.key]"
        >{{ author.name }}</a
      >
      }
    </div>
  </div>
  <!-- pagination -->
  <a routerLink="">Go to the Authors page</a>
  }
  <ng-template #noAuthors> There is no author with such name </ng-template>
</div>
